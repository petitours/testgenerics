  <%- include('../partials/header.ejs') %>

    <main class="calendar">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="#">Accueil</a></li>
          <li class="breadcrumb-item active" aria-current="page"><h1><%= meta.title %></h1></li>
        </ol>
      </nav>

        <!--form action="..." method="post" enctype="multipart/form-data">
          <fieldset>
            <p><label>Date centrale <input name="centralDate" max="" min="" step="" type="date" value="2020-05-02"></label></p>
            <p><label>Nombre de jours <input name="range" max="" min="" step=1 type="number" value=12></label></p>
          </fieldset>
          <button>Submit</button>
        </form-->

          <div class="btn-group" role="group" aria-label="Third group">
            <a role="button" href="/calendar/add" class="btn btn-outline-secondary" title="Création d'un nouvel évènement">Créer</a>
          </div>
        </div>

        <div id="timelineici"></div>

        <a href="/simuerreur" >declencher erreur</a> </br>
        <a href="/calendar/edit/46546846654" >editer un evenement qui n'existe pas</a></br>
        <a href="/calendar/del/46546846654" >effacer un evenement qui n'existe pas</a></br>
        <a href="/calendar?range=year&date=now" >ca2lendar?range=year&date=now</a> </br>
        <a href="/calendar?range=month&date=now" >calendar?range=month&date=now</a></br>
        <a href="/calendar?range=week&date=now" >calendar?range=week&date=now</a></br>
        <a href="/calendar?range=day&date=now" >calendar?range=day&date=now</a></br>
        <a href="/calendar?range=400&date=now" >calendar?range=400&date=now</a></br>
        <a href="/calendar?range=day&date=2019-08-24" >calendar?range=day&date=2019-08-24</a></br>

        <div class="table-wrapper">
          <% if (body.length > 0) {%>
              <table class="table table-hovered">
                  <thead class="thead-dark">
                      <tr>
                          <th scope="col">id</th>
                          <th scope="col">Evènement</th>
                          <th scope="col">Début</th>
                          <th scope="col">Fin</th>
                          <th scope="col">Action</th>
                      </tr>
                  </thead>
                  <tbody>
                      <% body.forEach((event, index) => { %>
                          <tr itemscope itemtype="http://schema.org/Event">
                              <th scope="row" itemprop="identifier"><%= event.id %></th>
                              <td itemprop="name"><%= event.content %></td>
                              <td itemprop="startDate" content="<%= event.startDate.toISOString() %>"><%= event.startDate.toLocaleString() %></td>
                              <td itemprop="endDate" content="<%= event.endDate.toISOString() %>"><%= event.endDate.toLocaleString() %></td>
                              <td>
                                  <a href="/calendar/edit/<%= event.id %>" class="btn btn-sm btn-success fawe " title="Editer l'évènement"></a>
                                  <a href="/calendar/del/<%= event.id %>" class="btn btn-sm btn-danger fawe " title="Supprimer l'évènement"></a>
                              </td>
                          </tr>
                      <% }) %>
                  </tbody>
              </table>
          <% } else { %>
              <p class="text-center">Aucun évènement trouvé. Aller <a href="/calendar/add" >à cette page</a> pour ajouter un évènement.</p>
          <% } %>
      </div>

    </main>



<%- include('../partials/footer.ejs') %>
